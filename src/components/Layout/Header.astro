---
export interface Props {
  isAuthenticated?: boolean;
}

const { isAuthenticated = false } = Astro.props;
---

<header
  class="header-main fixed top-0 left-0 right-0 z-50 bg-primary-900/95 backdrop-blur-md border-b border-white/10 transition-all duration-300"
  role="banner"
  aria-label="Navegaci칩n principal"
>
  <nav class="nav-container mx-auto px-4 sm:px-6 lg:px-8" role="navigation" aria-label="Men칰 principal">
    <div class="nav-wrapper flex items-center justify-between h-16 lg:h-20">
      <!-- Logo -->
      <div class="logo-container flex-shrink-0">
        <a
          href="/"
          class="logo-link flex items-center space-x-3 group"
          aria-label="CryptoSe침ales Pro - Plataformas Trading Criptomonedas L칤der en LATAM"
        >
          <div class="logo-icon relative">
            <div
              class="w-10 h-10 lg:w-12 lg:h-12 flex items-center justify-center group-hover:scale-110 transition-transform duration-300"
            >
              <svg
                width="96"
                height="97"
                viewBox="0 0 96 97"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                class="w-full h-full object-contain"
                role="img"
                aria-label="logo de la plataforma Crypto Se침ales de trading con criptomonedas mas rentables"
              >
                <g clip-path="url(#clip0_1_2)">
                  <path
                    d="M21.3861 88.896L23.0352 87.1139C23.9382 86.1349 25.1453 84.4762 25.7109 83.4307C26.2764 82.3852 27.9921 79.4434 32.3168 72.2624L36.9505 66.298C43.1715 58.2996 42.5156 58.3091 49.4543 66.0556C57.1057 74.5863 55.6372 75.1852 66.297 59.1931C75.6547 45.1543 76.5909 43.0347 73.4257 43.0347C72.1046 43.0347 71.425 43.8521 64.1584 54.1935C55.0622 67.1345 56.4689 66.5547 46.099 55.1535L46.2178 54.5166C46.2844 54.165 46.5505 53.7895 46.8119 53.685C47.0733 53.5756 47.6768 52.7915 48.1521 51.936C48.6273 51.0853 49.2119 50.5055 49.459 50.6576C50.1006 51.0568 50.0008 50.2156 49.3259 49.5408C48.8745 49.0893 48.9267 48.9135 50.3762 48.5L52.6337 50.5198C55.8036 53.357 56.1695 53.0434 73.6634 28.0644C81.4717 29.6279 85.1358 19.3958 78.8911 15.2327L79.0099 14.477C79.1477 13.5836 81.9945 12.2244 84.5941 12.3812C88.8951 17.9321 88.9331 18.4406 88.7762 49.2461C88.6099 81.5677 88.6099 81.5772 82.137 85.9257C77.684 88.9151 76.7667 88.9911 47.1683 88.9388L21.3861 88.896Z"
                    fill="#49D393"></path>
                  <path
                    d="M7.60396 76.0644V64.1832L11.7624 61.5836C20.1695 56.3321 32.7493 42.5737 39.2127 31.5622C42.1497 26.5626 45.0582 21.3206 45.6713 19.9186C46.2891 18.5166 48.1331 15.0711 52.7525 7.15347H64.1584L63.3267 9.41089C62.8705 10.6513 61.2214 13.5931 59.6673 15.9455C58.1085 18.298 55.2428 22.8937 53.2943 26.1634C51.3457 29.4283 49.036 32.9024 46.5743 35.6683L45.5097 34.8366C42.3873 32.3891 42.4539 32.3226 28.8808 51.1139C22.0848 60.5238 16.3343 68.9166 15.6832 71.3119L12.8269 73.0941C11.2586 74.0731 9.43842 75.1424 7.60396 76.0644Z"
                    fill="#A0C475"></path>
                  <path
                    d="M7.60396 76.0644C9.43842 75.1424 11.2586 74.0731 12.8269 73.0941L15.6832 71.3119L16.9616 71.8109C19.1335 72.6616 19.9081 71.8156 31.124 56.3178C43.8653 38.7194 42.8483 39.4323 50.3762 48.5C48.9267 48.9135 48.8745 49.0893 49.3259 49.5408C50.0008 50.2156 50.1006 51.0568 49.459 50.6576C49.2119 50.5055 48.6273 51.0853 48.1521 51.936C47.6768 52.7915 47.0733 53.5756 46.8119 53.685C46.5505 53.7895 46.2844 54.165 46.2178 54.5166L46.099 55.1535L45.0582 54.3218C42.3541 52.1594 41.836 52.5158 35.1303 61.1748C28.2297 70.0857 27.5121 71.8917 32.3168 72.2624C27.9921 79.4434 26.2764 82.3851 25.7109 83.4307C25.1453 84.4762 23.9382 86.1349 23.0352 87.1139L21.3861 88.896C14.0721 86.8715 11.2776 84.2576 9.14851 79.5099L7.60396 76.0644Z"
                    fill="#77CE84"></path>
                  <path
                    d="M7.60396 56.104V43.7475L9.32436 41.7277C10.2701 40.6156 13.6111 36.8232 16.7477 33.2921C21.8566 27.5463 22.9117 26.0303 26.8562 18.797C29.28 14.3535 32.0317 9.91465 34.6931 7.15347H45.1485L44.0459 8.73129C43.4424 9.59624 40.9806 14.0683 38.5711 18.6687C32.7778 29.7467 24.385 40.5396 7.60396 56.104Z"
                    fill="#CCBC66"></path>
                  <path
                    d="M7.60396 64.1832V56.104C24.385 40.5396 32.7778 29.7467 38.5711 18.6687C40.9806 14.0683 43.4424 9.59624 44.0459 8.73129L45.1485 7.15347H52.7525C48.1331 15.0711 46.2891 18.5166 45.6713 19.9186C45.0582 21.3206 42.1497 26.5626 39.2127 31.5622C32.7493 42.5737 20.1695 56.3321 11.7624 61.5836L7.60396 64.1832Z"
                    fill="#B2BF6D"></path>
                  <path
                    d="M46.5743 35.6683C49.036 32.9024 51.3457 29.4283 53.2943 26.1634C55.2428 22.8937 58.1085 18.298 59.6673 15.9455C61.2214 13.5931 62.8705 10.6513 63.3267 9.41089L64.1584 7.15347C77.0899 7.5099 79.8701 8.28931 82.8119 10.8366L84.5941 12.3812C81.9945 12.2244 79.1477 13.5836 79.0099 14.477L78.8911 15.2327C73.3307 11.5257 66.5917 17.2857 68.9109 23.3119L68.4261 23.4307C68.1552 23.4972 67.4376 24.6188 66.8293 25.9257C66.221 27.2327 63.3362 31.6762 60.423 35.8014C54.9339 43.5764 54.8198 43.7808 56.0792 44.2228L55.3853 44.8168C54.8008 45.3158 54.0404 44.6267 46.5743 35.6683Z"
                    fill="#77CE84"></path>
                  <path
                    d="M7.60396 43.7475C7.63723 19.7475 7.63723 19.7475 9.00119 16.6584C12.057 9.74832 18.1022 6.96812 29.8218 7.10119L34.6931 7.15347C32.0317 9.91465 29.28 14.3535 26.8562 18.797C22.9117 26.0303 21.8566 27.5463 16.7477 33.2921C13.6111 36.8232 10.2701 40.6156 9.32436 41.7277L7.60396 43.7475Z"
                    fill="#EAB75B"></path>
                  <path
                    d="M15.6832 71.3119C16.3343 68.9166 22.0848 60.5238 28.8808 51.1139C42.4539 32.3226 42.3873 32.3891 45.5097 34.8366L46.5743 35.6683C54.0404 44.6267 54.8008 45.3158 55.3853 44.8168L56.0792 44.2228L69.3861 24.7376L73.6634 28.0644C56.1695 53.0434 55.8036 53.357 52.6337 50.5198L50.3762 48.5C42.8483 39.4323 43.8653 38.7194 31.124 56.3178C19.9081 71.8156 19.1335 72.6616 16.9616 71.8109L15.6832 71.3119Z"
                    fill="white"></path>
                  <path
                    d="M46.099 55.1535C56.4689 66.5547 55.0622 67.1345 64.1584 54.1935C71.4249 43.8521 72.1045 43.0347 73.4257 43.0347C76.5909 43.0347 75.6546 45.1543 66.297 59.1931C55.6372 75.1851 57.1057 74.5863 49.4543 66.0556C42.5156 58.3091 43.1715 58.2996 36.9505 66.298L32.3168 72.2624C27.5121 71.8917 28.2297 70.0857 35.1303 61.1748C41.836 52.5158 42.3541 52.1594 45.0582 54.3218L46.099 55.1535Z"
                    fill="white"></path>
                  <path
                    d="M73.6634 28.0644L69.3861 24.7376L68.9109 23.3119C66.5917 17.2857 73.3307 11.5257 78.8911 15.2327C85.1358 19.3958 81.4717 29.6279 73.6634 28.0644Z"
                    fill="#FF4456"></path>
                  <path
                    d="M68.9109 23.3119L69.3861 24.7376L56.0792 44.2228C54.8198 43.7808 54.9339 43.5764 60.423 35.8014C63.3362 31.6762 66.221 27.2327 66.8293 25.9257C67.4376 24.6188 68.1552 23.4972 68.4261 23.4307L68.9109 23.3119Z"
                    fill="#49D393"></path>
                </g>
                <defs>
                  <clipPath id="clip0_1_2">
                    <rect width="96" height="96" fill="white" transform="translate(0 0.5)"></rect>
                  </clipPath>
                </defs>
              </svg>
            </div>
          </div>
          <div class="logo-text hidden sm:block">
            <span class="text-xl lg:text-2xl font-hero font-bold text-white">
              Crypto<span class="text-gradient">Se침ales</span>
            </span>
            <div class="text-xs text-gray-400 -mt-1">Institutional Trading</div>
          </div>
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div class="nav-desktop hidden lg:flex items-center space-x-8">
        <a
          href="#features"
          class="nav-link text-gray-300 hover:text-white transition-colors duration-200 font-medium"
          data-section="features"
          title="Mejores indicadores trading y an치lisis t칠cnico avanzado"
        >
          Se침ales IA
        </a>
        <a
          href="#results"
          class="nav-link text-gray-300 hover:text-white transition-colors duration-200 font-medium"
          data-section="results"
          title="Resultados reales de bitcoin trading y criptomonedas rentables"
        >
          Resultados
        </a>
        <a
          href="#pricing"
          class="nav-link text-gray-300 hover:text-white transition-colors duration-200 font-medium"
          data-section="pricing"
          title="Comprar bot trading y planes de arbitrage crypto"
        >
          Planes
        </a>
        <a
          href="#testimonials"
          class="nav-link text-gray-300 hover:text-white transition-colors duration-200 font-medium"
          data-section="testimonials"
          title="Testimonios de usuarios usando estrategia trading criptomonedas"
        >
          Testimonios
        </a>
      </div>

      <!-- Auth Buttons -->
      <div class="auth-container flex items-center space-x-3">
        {
          !isAuthenticated ? (
            <div class="auth-buttons flex items-center space-x-2 lg:space-x-4">
              <button
                id="signup-btn"
                class="btn-signup px-4 py-2 lg:px-6 lg:py-3 bg-accent-gold text-white font-semibold rounded-lg hover:bg-accent-green transition-colors duration-300 text-sm lg:text-base"
                aria-label="Acceso gratis a se침ales de trading en vivo"
                title="Proveedor de se침ales trading l칤der - Acceso gratuito"
              >
                <span class="signup-text" data-short="游댠 Gratis" data-long="游댠 Acceso Gratuito">
                  游댠 Gratis
                </span>
              </button>
            </div>
          ) : (
            <div class="user-menu relative">
              <button
                id="user-menu-btn"
                class="user-avatar flex items-center space-x-2 p-2 rounded-lg hover:bg-white/10 transition-colors duration-200"
                aria-label="Men칰 de usuario"
                aria-expanded="false"
                aria-haspopup="true"
              >
                <div class="w-8 h-8 bg-gradient-to-br from-accent-blue to-accent-green rounded-full flex items-center justify-center">
                  <span class="text-white text-sm font-semibold">U</span>
                </div>
                <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                  <path
                    fill-rule="evenodd"
                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                    clip-rule="evenodd"
                  />
                </svg>
              </button>
            </div>
          )
        }

        <!-- Mobile Menu Button -->
        <button
          id="mobile-menu-btn"
          class="mobile-menu-toggle lg:hidden p-2 rounded-lg hover:bg-white/10 transition-colors duration-200"
          aria-label="Abrir men칰 de navegaci칩n"
          aria-expanded="false"
          aria-controls="mobile-menu"
        >
          <svg
            class="menu-icon w-6 h-6 text-white"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
          <svg
            class="close-icon w-6 h-6 text-white hidden"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div
      id="mobile-menu"
      class="mobile-menu lg:hidden absolute top-full left-0 right-0 bg-gradient-to-b from-primary-900 to-primary-800 border-b border-white/20 shadow-2xl transform -translate-y-full opacity-0 invisible transition-all duration-300"
      role="menu"
      aria-labelledby="mobile-menu-btn"
    >
      <div class="mobile-menu-content px-4 py-6 space-y-6">
        <!-- Mobile Navigation Links -->
        <nav class="mobile-nav space-y-4" role="none">
          <a
            href="#features"
            class="mobile-nav-link block py-3 text-lg font-medium text-gray-200 hover:text-white transition-colors duration-200 border-b border-gray-600/40"
            role="menuitem"
            data-section="features"
          >
            Se침ales IA & An치lisis T칠cnico
          </a>
          <a
            href="#results"
            class="mobile-nav-link block py-3 text-lg font-medium text-gray-200 hover:text-white transition-colors duration-200 border-b border-gray-600/40"
            role="menuitem"
            data-section="results"
          >
            Resultados Bitcoin Trading
          </a>
          <a
            href="#pricing"
            class="mobile-nav-link block py-3 text-lg font-medium text-gray-200 hover:text-white transition-colors duration-200 border-b border-gray-600/40"
            role="menuitem"
            data-section="pricing"
          >
            Planes Bot Trading
          </a>
          <a
            href="#testimonials"
            class="mobile-nav-link block py-3 text-lg font-medium text-gray-200 hover:text-white transition-colors duration-200 border-b border-gray-600/40"
            role="menuitem"
            data-section="testimonials"
          >
            Testimonios Usuarios
          </a>
        </nav>

        <!-- Mobile Auth Buttons -->
        {
          !isAuthenticated && (
            <div class="mobile-auth space-y-4">
              <button class="mobile-signup-btn w-full py-3 px-4 bg-accent-gold text-white font-semibold rounded-lg hover:bg-accent-green transition-colors duration-300">
                游댠 Se침ales Trading Gratis
              </button>
            </div>
          )
        }

        <!-- Mobile Social Links -->
        <div class="mobile-social border-t border-gray-600/40 pt-6">
          <p class="text-sm text-gray-300 mb-4">S칤guenos - An치lisis fundamental diario</p>
          <div class="flex space-x-4">
            <a
              href="https://x.com/cryptosenalespro"
              class="social-link p-3 bg-white/10 rounded-lg hover:bg-white/20 transition-colors duration-200"
              aria-label="S칤guenos en X - Estrategias trading actualizadas"
              target="_blank"
              rel="noopener noreferrer"
            >
              <svg
                class="w-5 h-5 text-gray-400 hover:text-white transition-colors duration-300"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"
                ></path>
              </svg>
            </a>
            <a
              href="https://instagram.com/cryptosenalespro"
              class="social-link p-3 bg-white/10 rounded-lg hover:bg-white/20 transition-colors duration-200"
              aria-label="S칤guenos en Instagram - Criptomonedas m치s rentables"
              target="_blank"
              rel="noopener noreferrer"
            >
              <svg
                class="w-5 h-5 text-gray-400 hover:text-pink-400 transition-colors duration-300"
                stroke="currentColor"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M4 8a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z"></path>
                <path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"></path>
                <path d="M16.5 7.5v.01"></path>
              </svg>
            </a>
            <a
              href="https://tiktok.com/@cryptosenalespro"
              class="social-link p-3 bg-white/10 rounded-lg hover:bg-white/20 transition-colors duration-200"
              aria-label="S칤guenos en TikTok - Tips de arbitrage crypto trading"
              target="_blank"
              rel="noopener noreferrer"
            >
              <svg
                class="w-5 h-5 text-gray-400 hover:text-accent-red transition-colors duration-300"
                stroke="currentColor"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path
                  d="M21 7.917v4.034a9.948 9.948 0 0 1 -5 -1.951v4.5a6.5 6.5 0 1 1 -8 -6.326v4.326a2.5 2.5 0 1 0 4 2v-11.5h4.083a6.005 6.005 0 0 0 4.917 4.917z"
                ></path>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>

<style>
  /* Responsive text usando CSS content - elimina duplicaci칩n de elementos */
  .signup-text::before {
    content: attr(data-short);
  }

  @media (min-width: 640px) {
    .signup-text::before {
      content: attr(data-long);
    }
  }

  /* Ocultar texto original y mostrar solo el pseudo-elemento */
  .signup-text {
    font-size: 0;
  }

  .signup-text::before {
    font-size: 0.875rem;
    font-weight: 600;
  }

  @media (min-width: 1024px) {
    .signup-text::before {
      font-size: 1rem;
    }
  }

  /* Optimizaci칩n adicional para el header */
  .header-main {
    will-change: transform;
  }

  .btn-signup {
    will-change: background-color;
  }

  /* Mobile menu optimizations */
  .mobile-menu.open {
    transform: translateY(0);
    opacity: 1;
    visibility: visible;
  }

  /* Reduce paint complexity */
  .mobile-menu-content {
    contain: layout style paint;
  }

  /* Scroll performance optimization */
  .header-main.scrolled {
    backdrop-filter: blur(10px);
    background: rgba(10, 14, 39, 0.95);
  }
</style>

<script>
  // Optimized header initialization - reduced blocking
  import { initHeader } from "../../scripts/header.ts";

  // Use requestIdleCallback if available, fallback to setTimeout
  if ("requestIdleCallback" in window) {
    requestIdleCallback(initHeader, { timeout: 2000 });
  } else {
    setTimeout(initHeader, 0);
  }
</script>

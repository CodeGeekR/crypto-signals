---
import { Star } from 'lucide-react';
import { Image } from 'astro:assets';

const testimonials = [
  {
    name: "Carlos Rodríguez",
    role: "Day Trader",
    image: "/images/testimonials/carlos-rodriguez.webp",
    imageAlt: "Foto de perfil de Carlos Rodríguez, Day Trader exitoso",
    content: "Las señales de CryptoSeñales Pro transformaron mi trading. En 6 meses, mi portafolio creció un 280% siguiendo sus estrategias institucionales.",
    rating: 5,
    stats: {
      roi: "+280%",
      period: "6 meses",
      trades: "426 operaciones"
    }
  },
  {
    name: "Ana Martínez",
    role: "Trader Profesional",
    image: "/images/testimonials/ana-martinez.webp",
    imageAlt: "Foto de perfil de Ana Martínez, Trader Profesional exitosa",
    content: "La precisión de sus señales y el análisis técnico avanzado me han permitido maximizar mis ganancias mientras minimizo riesgos. El mejor servicio de señales que he usado.",
    rating: 5,
    stats: {
      roi: "+175%",
      period: "3 meses",
      trades: "213 operaciones"
    }
  },
  {
    name: "Miguel Torres",
    role: "Swing Trader",
    image: "/images/testimonials/miguel-torres.webp",
    imageAlt: "Foto de perfil de Miguel Torres, Swing Trader exitoso",
    content: "El soporte 24/7 y la comunidad son increíbles. He aprendido tanto de otros traders y el equipo siempre está disponible para resolver dudas.",
    rating: 5,
    stats: {
      roi: "+420%",
      period: "12 meses",
      trades: "892 operaciones"
    }
  }
];
---

<section id="testimonials" class="relative py-24 bg-primary-800/50">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section Header -->
    <div class="text-center mb-16">
      <h2 class="text-4xl md:text-5xl font-hero font-bold mb-6">
        Traders <span class="text-gradient">Exitosos</span>
      </h2>
      <p class="text-xl text-gray-300 max-w-3xl mx-auto">
        Conoce a algunos de nuestros traders más exitosos y sus resultados reales usando nuestras señales.
      </p>
    </div>

    <!-- Testimonials Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {testimonials.map((testimonial, index) => (
        <div class="card-glass p-8 rounded-2xl">
          <!-- User Info -->
          <div class="flex items-center mb-6">
            <!-- Avatar optimizado con Astro Image -->
            <div class="flex-shrink-0 mr-4">
              <img
                src={testimonial.image}
                alt={testimonial.imageAlt}
                class="w-16 h-16 rounded-full object-cover"
                width="64"
                height="64"
                loading={index < 3 ? "eager" : "lazy"}
                decoding="async"
                sizes="64px"
              />
            </div>
            <div class="min-w-0">
              <h3 class="font-bold text-lg text-white truncate">{testimonial.name}</h3>
              <p class="text-gray-400 text-sm truncate">{testimonial.role}</p>
            </div>
          </div>

          <!-- Rating -->
          <div
            class="flex items-center mb-4"
            role="img"
            aria-label={`Calificación: ${testimonial.rating} de 5 estrellas`}
          >
            {Array(testimonial.rating).fill(null).map((_, starIndex) => (
              <Star 
                className="w-5 h-5 text-accent-gold fill-current" 
                aria-hidden="true"
                key={starIndex}
              />
            ))}
          </div>

          <!-- Content -->
          <blockquote class="text-gray-300 mb-6 leading-relaxed">
            "{testimonial.content}"
          </blockquote>

          <!-- Stats -->
          <div class="grid grid-cols-3 gap-4 pt-6 border-t border-white/10">
            <div class="text-center">
              <div
                class="text-xl font-bold text-accent-green"
                id={`stat-roi-${index}`}
                aria-labelledby={`stat-roi-${index} stat-roi-label-${index}`}
              >
                {testimonial.stats.roi}
              </div>
              <div class="text-sm text-gray-400" id={`stat-roi-label-${index}`}>ROI</div>
            </div>
            <div class="text-center">
              <div
                class="text-xl font-bold text-accent-gold"
                id={`stat-period-${index}`}
                aria-labelledby={`stat-period-${index} stat-period-label-${index}`}
              >
                {testimonial.stats.period}
              </div>
              <div class="text-sm text-gray-400" id={`stat-period-label-${index}`}>Período</div>
            </div>
            <div class="text-center">
              <div
                class="text-xl font-bold text-accent-blue"
                id={`stat-trades-${index}`}
                aria-labelledby={`stat-trades-${index} stat-trades-label-${index}`}
              >
                {testimonial.stats.trades}
              </div>
              <div class="text-sm text-gray-400" id={`stat-trades-label-${index}`}>Trades</div>
            </div>
          </div>
        </div>
      ))}
    </div>

    <!-- Trust Indicators -->
    <div class="mt-16 grid grid-cols-2 md:grid-cols-4 gap-8" role="region" aria-label="Indicadores de confianza">
      <div class="text-center">
        <div class="text-4xl font-bold text-accent-green mb-2" aria-label="10 mil traders activos">
          10K+
        </div>
        <div class="text-gray-400">Traders Activos</div>
      </div>
      <div class="text-center">
        <div class="text-4xl font-bold text-accent-gold mb-2" aria-label="50 millones de dólares en volumen mensual">
          $50M+
        </div>
        <div class="text-gray-400">Volumen Mensual</div>
      </div>
      <div class="text-center">
        <div class="text-4xl font-bold text-accent-blue mb-2" aria-label="Presencia en más de 15 países">
          15+
        </div>
        <div class="text-gray-400">Países</div>
      </div>
      <div class="text-center">
        <div class="text-4xl font-bold text-accent-red mb-2" aria-label="Soporte 24 horas 7 días">
          24/7
        </div>
        <div class="text-gray-400">Soporte</div>
      </div>
    </div>
  </div>
</section>

<!-- Schema.org JSON-LD para SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "Testimonios de Traders Exitosos",
  "description": "Testimonios reales de traders que han tenido éxito usando CryptoSeñales Pro",
  "itemListElement": [
    {
      "@type": "Review",
      "position": 1,
      "itemReviewed": {
        "@type": "SoftwareApplication",
        "name": "CryptoSeñales Pro",
        "description": "Plataforma de señales de trading profesional con análisis técnico avanzado",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web Browser, iOS, Android",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD",
          "availability": "https://schema.org/InStock",
          "name": "Prueba Gratuita"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.9",
          "reviewCount": "2847",
          "bestRating": "5"
        }
      },
      "author": {
        "@type": "Person",
        "name": "Carlos Rodríguez"
      },
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": 5,
        "bestRating": 5
      },
      "reviewBody": "Las señales de CryptoSeñales Pro transformaron mi trading. En 6 meses, mi portafolio creció un 280% siguiendo sus estrategias institucionales."
    },
    {
      "@type": "Review",
      "position": 2,
      "itemReviewed": {
        "@type": "SoftwareApplication",
        "name": "CryptoSeñales Pro",
        "description": "Plataforma de señales de trading profesional con análisis técnico avanzado",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web Browser, iOS, Android",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD",
          "availability": "https://schema.org/InStock",
          "name": "Prueba Gratuita"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.9",
          "reviewCount": "2847",
          "bestRating": "5"
        }
      },
      "author": {
        "@type": "Person",
        "name": "Ana Martínez"
      },
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": 5,
        "bestRating": 5
      },
      "reviewBody": "La precisión de sus señales y el análisis técnico avanzado me han permitido maximizar mis ganancias mientras minimizo riesgos. El mejor servicio de señales que he usado."
    },
    {
      "@type": "Review",
      "position": 3,
      "itemReviewed": {
        "@type": "SoftwareApplication",
        "name": "CryptoSeñales Pro",
        "description": "Plataforma de señales de trading profesional con análisis técnico avanzado",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web Browser, iOS, Android",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD",
          "availability": "https://schema.org/InStock",
          "name": "Prueba Gratuita"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.9",
          "reviewCount": "2847",
          "bestRating": "5"
        }
      },
      "author": {
        "@type": "Person",
        "name": "Miguel Torres"
      },
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": 5,
        "bestRating": 5
      },
      "reviewBody": "El soporte 24/7 y la comunidad son increíbles. He aprendido tanto de otros traders y el equipo siempre está disponible para resolver dudas."
    }
  ]
}
</script>